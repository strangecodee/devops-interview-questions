# kubernetes â€” Sat Dec  6 22:17:07 IST 2025
**Topic:** Scalability
**Style:** Beginner-friendly
**Depth:** Very high detail
**UniqueKeyword:** spectrum

# Kubernetes Concept
Horizontal Pod Autoscaler (HPA) automatically scales the number of Pods in a replication controller, deployment, replica set, or stateful set based on observed CPU utilization or custom metrics.

# Explanation
The Horizontal Pod Autoscaler (HPA) is a Kubernetes resource that dynamically adjusts the number of Pods in a deployment or replica set to match the workload demand. It monitors resource utilization, such as CPU usage, and scales the number of Pods up or down within a defined range. By automatically scaling, the HPA helps maintain application performance and optimize resource consumption, ensuring applications can handle varying levels of traffic efficiently. The spectrum of scaling options is handled by tuning the metrics server and autoscaling configuration.

# Best Practices
- Define resource requests and limits for your Pods to allow the HPA to make accurate scaling decisions.
- Set realistic minimum and maximum replica counts for the HPA to prevent over-scaling or under-scaling.
- Monitor the HPA's performance and adjust the target CPU utilization or custom metrics thresholds as needed.

# YAML Example
```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: spectrum-hpa-example
  namespace: default
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: spectrum-example-deployment
  minReplicas: 2
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: AverageValue
        averageValue: 800Mi
  - type: Pods
    pods:
      metric:
        name: packets-per-second
      target:
        type: AverageValue
        averageValue: 1000m
  - type: Object
    object:
      metric:
        name: requests-per-second
      describedObject:
        apiVersion: networking.k8s.io/v1
        kind: Ingress
        name: main-route
      target:
        type: Value
        value: 200
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: spectrum-example-deployment
  namespace: default
  labels:
    app: spectrum-example
spec:
  replicas: 2
  selector:
    matchLabels:
      app: spectrum-example
  template:
    metadata:
      labels:
        app: spectrum-example
    spec:
      containers:
      - name: spectrum-example-container
        image: nginx:latest
        resources:
          requests:
            cpu: 200m
            memory: 256Mi
          limits:
            cpu: 500m
            memory: 512Mi
        ports:
        - containerPort: 80
        livenessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 3
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 5
          periodSeconds: 10
        lifecycle:
          postStart:
            exec:
              command: ["/bin/sh", "-c", "echo 'Container started' > /usr/share/nginx/html/index.html"]
        volumeMounts:
        - name: config-volume
          mountPath: /etc/nginx/conf.d
      volumes:
      - name: config-volume
        configMap:
          name: nginx-config
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-config
  namespace: default
data:
  default.conf: |
    server {
        listen 80;
        server_name localhost;

        location / {
            root   /usr/share/nginx/html;
            index  index.html index.htm;
        }

        error_page   500 502 503 504  /50x.html;

        location = /50x.html {
            root   /usr/share/nginx/html;
        }
    }
```
